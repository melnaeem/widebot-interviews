<div class="container">
  <h2>Edit Flow Name (Fixed Version)</h2>

  <div
    class="card"
    style="
      background-color: #d4edda;
      border-color: #c3e6cb;
      margin-bottom: 2rem;
    "
  >
    <div
      class="card-header"
      style="background-color: #c3e6cb; border-bottom-color: #c3e6cb"
    >
      <strong>âœ… Race Condition Fixed</strong>
    </div>
    <div class="card-body">
      <p style="margin-top: 0"><strong>How to test:</strong></p>
      <ol>
        <li>Type <code>"stale"</code> in the input (starts slow request)</li>
        <li>
          Immediately change to <code>"taken"</code> (starts fast request)
        </li>
        <li>Wait and observe the UI</li>
      </ol>
      <p>
        <strong>Expected behavior:</strong> The UI will correctly show the final
        state without conflicting error messages. Previous requests are
        automatically cancelled.
      </p>
    </div>
  </div>

  <div class="form-group">
    <label for="flowName">Flow Name</label>
    <input
      id="flowName"
      type="text"
      class="form-control"
      [class.is-invalid]="isNameTaken"
      [ngModel]="flow.Name"
      (ngModelChange)="onNameChange($event)"
    />

    <div *ngIf="isSaving" class="form-status">Saving...</div>

    <div *ngIf="isNameTaken" class="invalid-feedback">
      This name is already taken.
    </div>
  </div>

  <div class="card">
    <div class="card-header">Current Flow State</div>
    <div class="card-body">
      <pre>{{ flow | json }}</pre>
    </div>
  </div>
</div>
